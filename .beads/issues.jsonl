{"id":"fullstack-boilerplate-67f","title":"Add integration tests for user edit feature","description":"## Summary\n\nWrite integration tests for the user edit slideover feature.\n\n**Plan**: apps/web/.claude/plans/floating-drifting-cerf.md\n**Depends on**: fullstack-boilerplate-sd9 (implementation)\n\n## Requirements\n\n1. **MSW handler**: Add handler for updateUser admin endpoint in the existing MSW setup (check apps/web/src/test/ or similar for existing MSW config pattern used by other tests).\n\n2. **Test scenarios**:\n   - Edit slideover opens when clicking Edit in dropdown menu\n   - Name field is pre-filled with current user name\n   - Save button is disabled initially (no changes)\n   - Save button enables after changing name\n   - Successful save shows success toast and closes slideover\n   - Failed save shows error toast\n   - Closing with unsaved changes triggers confirm dialog\n   - Closing without changes does not trigger confirm\n\n3. Run pnpm test in apps/web and ensure all tests pass.\n\n## Acceptance Criteria\n\n- All test scenarios above are covered\n- Tests pass with pnpm test\n- MSW handler correctly mocks the updateUser endpoint","status":"open","priority":2,"issue_type":"task","owner":"teterich.ilya@gmail.com","created_at":"2026-01-30T18:12:23.697625+03:00","created_by":"tiilyat","updated_at":"2026-01-30T18:12:23.697625+03:00","dependencies":[{"issue_id":"fullstack-boilerplate-67f","depends_on_id":"fullstack-boilerplate-sd9","type":"blocks","created_at":"2026-01-30T18:12:23.698922+03:00","created_by":"tiilyat"}]}
{"id":"fullstack-boilerplate-sd9","title":"Add user edit slideover with name field","description":"## Summary\n\nAdd ability to edit user name via a slideover form on the users management page. Uses better-auth admin API authClient.admin.updateUser.\n\n**Plan**: apps/web/.claude/plans/floating-drifting-cerf.md\n\n## Requirements\n\n1. **Composable**: Create apps/web/src/composables/queries/use-update-user.ts following the exact pattern of apps/web/src/composables/queries/use-ban-user.ts. Call authClient.admin.updateUser({ userId, data: { name } }). Invalidate admin-users query on success. Toast on success/error.\n\n2. **Extract UserDetailsView**: Create apps/web/src/components/UserDetailsView.vue extracting lines 220-286 from apps/web/src/pages/users.vue. Accept prop user: UserWithRole | null. Update users.vue to use this component inside the existing Details slideover.\n\n3. **UserEditForm component**: Create apps/web/src/components/UserEditForm.vue with props user: UserWithRole, emits success and close. Zod schema for name validation (non-empty string). UForm with single name field pre-filled from user prop. Use useTemplateRef('form') to access UForm isDirty. Save button disabled when \\!isDirty || isPending. handleClose: if dirty, confirm('You have unsaved changes...') before emitting close. On submit success: emit success then close.\n\n4. **Integration in users.vue** (apps/web/src/pages/users.vue): Add selectedUserForEdit ref and isEditOpen computed (same pattern as existing Details slideover lines 15-21). Add Edit menu item to getUserActions() between Details and Ban/Unban. Add second USlideover with UserEditForm. On close set selectedUserForEdit = null.\n\n## Acceptance Criteria\n\n- Edit slideover opens from dropdown menu\n- Name field pre-filled with current name\n- Save disabled when no changes or while saving\n- Confirm dialog on close with unsaved changes\n- Toast on success/error\n- Users list refreshes after successful edit\n- Details slideover still works independently\n- pnpm lint:fix and pnpm type-check pass","status":"open","priority":1,"issue_type":"task","owner":"teterich.ilya@gmail.com","created_at":"2026-01-30T18:12:08.726352+03:00","created_by":"tiilyat","updated_at":"2026-01-30T18:12:08.726352+03:00"}
